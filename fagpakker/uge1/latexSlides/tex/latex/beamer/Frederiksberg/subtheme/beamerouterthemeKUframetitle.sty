% KU frame title (Beamer outer theme).
%
% Morten Larsen <ml@life.ku.dk>, 2009
% http://matdat.life.ku.dk/LaTeX/Frederiksberg

\ProvidesPackage{beamerouterthemeKUframetitle}[2009/07/28]

\newif\ifKUframetitle@beamer
\KUframetitle@beamerfalse

\DeclareOptionBeamer{align}[left]{\def\KUframetitle@align{#1}}
\DeclareOptionBeamer{beamer}{\KUframetitle@beamertrue}

\ExecuteOptionsBeamer{align}
\ProcessOptionsBeamer

\mode<presentation>

\ifKUframetitle@beamer
  % Just use beamer default
  \setbeamertemplate{frametitle}[default][\KUframetitle@align]
\else
  % Frame title - modified from the one in beamerouterthemedefault.sty
  \defbeamertemplate{frametitle}{KU}[1][left]
  {
    \nointerlineskip%
    \@tempdima=\textwidth%
    \advance\@tempdima by 0.6cm%
    \hskip\beamer@leftmargin\hskip-0.3cm%
    \begin{beamercolorbox}[sep=0.3cm,#1,wd=\the\@tempdima]{frametitle}
      \usebeamerfont{frametitle}%
      \vbox{}\vskip-1ex%
      \if@tempswa\else\csname beamer@fteleft\endcsname\fi%
      \strut\insertframetitle\strut\par%
      {%
        \ifx\insertframesubtitle\@empty%
        \else%
        {\usebeamerfont{framesubtitle}\usebeamercolor[fg]{framesubtitle}\insertframesubtitle\strut\par}%
        \fi
      }%
      \vskip-1ex%
      \if@tempswa\else\vskip-.3cm\fi% set inside beamercolorbox... evil here...
    \end{beamercolorbox}%
  }
  \setbeamertemplate{frametitle}[KU][\KUframetitle@align]
\fi
